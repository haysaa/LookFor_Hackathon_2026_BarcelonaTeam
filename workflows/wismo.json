{
    "workflow_name": "WISMO",
    "version": "1.0",
    "description": "Where Is My Order - Handles shipping delay inquiries with day-based promise logic",
    "required_fields": [
        "order_id"
    ],
    "optional_fields": [
        "order_date",
        "shipping_status",
        "tracking_number",
        "contact_day"
    ],
    "tools_available": [
        "shopify_get_order_details"
    ],
    "rules": [
        {
            "id": "wismo_missing_order_id",
            "condition": {
                "field": "order_id",
                "operator": "is_null"
            },
            "action": "ask_clarifying",
            "policy_applied": "require_order_id",
            "response": {
                "clarifying_questions": [
                    "Can you please provide your order number so I can check the status?"
                ]
            }
        },
        {
            "id": "wismo_need_status_check",
            "condition": {
                "field": "shipping_status",
                "operator": "is_null"
            },
            "action": "call_tool",
            "policy_applied": "fetch_order_status",
            "tool_plan": [
                {
                    "tool_name": "shopify_get_order_details",
                    "params_source": {
                        "order_id": "context.order_id"
                    }
                }
            ]
        },
        {
            "id": "wismo_already_delivered",
            "condition": {
                "field": "shipping_status",
                "operator": "equals",
                "value": "delivered"
            },
            "action": "respond",
            "policy_applied": "order_delivered",
            "response_template": "Good news! Our records show your order was delivered. If you haven't received it, please check with neighbors or your building reception."
        },
        {
            "id": "wismo_mon_wed_promise",
            "condition": {
                "all": [
                    {
                        "field": "contact_day",
                        "operator": "in",
                        "value": [
                            "Mon",
                            "Tue",
                            "Wed"
                        ]
                    },
                    {
                        "field": "promise_given",
                        "operator": "is_null"
                    },
                    {
                        "field": "shipping_status",
                        "operator": "not_equals",
                        "value": "delivered"
                    }
                ]
            },
            "action": "respond",
            "policy_applied": "friday_promise",
            "response_template": "Your order is on its way! Based on current shipping updates, your package will arrive by Friday. We'll keep tracking it for you.",
            "set_context": {
                "promise_given": "friday"
            }
        },
        {
            "id": "wismo_thu_sun_promise",
            "condition": {
                "all": [
                    {
                        "field": "contact_day",
                        "operator": "in",
                        "value": [
                            "Thu",
                            "Fri",
                            "Sat",
                            "Sun"
                        ]
                    },
                    {
                        "field": "promise_given",
                        "operator": "is_null"
                    },
                    {
                        "field": "shipping_status",
                        "operator": "not_equals",
                        "value": "delivered"
                    }
                ]
            },
            "action": "respond",
            "policy_applied": "next_week_promise",
            "response_template": "Your order is on its way! Based on current shipping updates, your package will arrive early next week. We'll keep tracking it for you.",
            "set_context": {
                "promise_given": "next_week"
            }
        },
        {
            "id": "wismo_post_promise_escalation",
            "condition": {
                "all": [
                    {
                        "field": "promise_given",
                        "operator": "is_not_null"
                    },
                    {
                        "field": "shipping_status",
                        "operator": "not_equals",
                        "value": "delivered"
                    }
                ]
            },
            "action": "escalate",
            "policy_applied": "post_promise_escalation",
            "escalation_reason": "Delivery promise exceeded - customer contacted after promise date but order still not delivered",
            "priority": "high"
        }
    ],
    "default_action": {
        "action": "escalate",
        "policy_applied": "unhandled_wismo_case",
        "escalation_reason": "WISMO case did not match any defined rules"
    }
}